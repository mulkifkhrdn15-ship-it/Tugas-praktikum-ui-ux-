<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Pemesanan Risol Mayo Spesial</title>
    <link rel="stylesheet" href="mulki.css">
</head>
<body>
    <div class="web-page-mockup">
        <div class="browser-bar">
            <span class="browser-controls"></span>
            <input type="text" value="http://aplikasi.makanan/risol/pesan" class="address-bar"> 
            <span class="close-btn">X</span>
        </div>
        
        <div class="nav-bar">
            <a href="#">Beranda</a>
            <a href="#">Menu</a>
            <a href="#">Status Pesanan</a>
            <a href="#">Promosi</a>
            <a href="#">Keluar</a>
        </div>
        
        <div class="form-container">
            <h3>Pesan Risol Mayo Spesial</h3>
            <form id="formPemesanan">
                <div class="form-row">
                    <div class="image-upload-section">
                        <img src="risol.jpeg" alt="Risol Mayo Spesial" class="product-image">
                        <button type="button">Lihat Resep</button>
                    </div>

                    <div class="form-fields-section">
                        <label for="titleName">Nama Produk:</label>
                        <input type="text" id="titleName" value="Risol Mayo Frozen Isi 5">

                        <label for="description">Deskripsi:</label>
                        <input type="text" id="description" value="Varian: Original Pedas M"> <label for="model">Catatan:</label>
                        <input type="text" id="model" value="Mohon kemas dengan t"> <label for="accountNumber">Kode Pesanan:</label>
                        <input type="text" id="accountNumber" value="ORD-RSL-005">
                        
                        <label for="bank">Metode Bayar:</label>
                        <input type="text" id="bank" value="E-Wallet DANA">

                        <label for="accountHolder">Nama Pemesan:</label>
                        <input type="text" id="accountHolder" value="Siska Dewi"> <label for="transaction">Jumlah Porsi/Pack:</label>
                        <input type="text" id="transaction" value="3">
                        
                        <p class="instruction-text">*Jumlah harga akan otomatis disesuaikan (Rp 25.000/pack).</p>
                        
                        <div class="communication-options">
                            <label><input type="checkbox" id="checkMobile" checked> Notifikasi SMS</label>
                            <input type="text" id="mobileNumbers" value="0811223344">
                            
                            <label><input type="checkbox" id="checkEmail" checked> Kirim Struk Email</label>
                            <input type="text" id="emails" value="siska.dewi@mail.com">
                        </div>

                        <button type="button" class="generate-link-btn" onclick="prosesPemesananRisol()">Konfirmasi & Lanjut Bayar</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script>
        function prosesPemesananRisol() {
            const porsi = parseInt(document.getElementById('transaction').value) || 1;
            const hargaSatuan = 25000; 
            const totalBayar = porsi * hargaSatuan;

            const dataPemesanan = {
                titleName: document.getElementById('titleName').value,
                description: document.getElementById('description').value,
                model: document.getElementById('model').value,
                totalAmount: `Rp ${totalBayar.toLocaleString('id-ID')}`, 
                payTo: document.getElementById('accountNumber').value, // Kode Pesanan
                accountHolder: document.getElementById('accountHolder').value, // Nama Pemesan
                mobileNumbers: document.getElementById('mobileNumbers').value,
                emails: document.getElementById('emails').value,
                isSendMobile: document.getElementById('checkMobile').checked,
                isSendEmail: document.getElementById('checkEmail').checked 
            };

            // Gunakan kunci 'dataPemesananRisol'
            localStorage.setItem('dataPemesananRisol', JSON.stringify(dataPemesanan));
            window.location.href = 'masuk.html';
        }
    </script>
</body>
</html>